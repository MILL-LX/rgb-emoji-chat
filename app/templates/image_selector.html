<!doctype html>
<html>

<head>
    <title>Image Selector</title>
    <style>
        :root {
            --cor_letras: #2a8a00;
        }

        body {
            margin: 0;
            padding: 0;
            background-color: #000;
            font-family: monospace;
        }

        .list_collections li {
            color: #fff;
        }

        #number_input {
            color: var(--cor_letras);
            font-size: 10vw;
        }

        #number_input {
            background-color: transparent;
            border: none;
            text-align: center;
        }

        .keypad {
            display: flex;
            flex-wrap: wrap;
            justify-content: space-evenly;
        }

        .keypad>div {
            width: 30%;
            border: 1px solid var(--cor_letras);
            display: flex;
            min-height: 20vh;
            justify-content: space-evenly;
            align-items: center;
        }

        .keypad>div a {
            color: var(--cor_letras);
            text-decoration: none;
            font-size: 10vw;
        }
    </style>
    <script src="{{ url_for('static', filename='socket.io-4.7.5.min.js') }}"></script>
    <script src="{{ url_for('static', filename='jquery-3.6.0.min.js') }}"></script>
</head>

<body>
    <div id="root">
        <div id="choose_collection">
            <ul class="list_collections">
                <li>MH G Collection PART</li>
                <li>Collection 2</li>
                <li>Collection 3</li>
                <li>Collection 4</li>
            </ul>
        </div>
        <div id="input_number">
            <input id="number_input" type="p" pattern="[0-9][0-9][0-9][0-9]" inputmode="numeric"
                class="number use-keyboard-input"></input>
            <input id="button_go" type="submit" value="GO">
        </div>
        <div class="keypad">
            <div class="key"><a href="#">1</a></div>
            <div class="key"><a href="#">2</a></div>
            <div class="key"><a href="#">3</a></div>
            <div class="key"><a href="#">4</a></div>
            <div class="key"><a href="#">5</a></div>
            <div class="key"><a href="#">6</a></div>
            <div class="key"><a href="#">7</a></div>
            <div class="key"><a href="#">8</a></div>
            <div class="key"><a href="#">9</a></div>
            <div class="key esc"><a href="#">ESC</a></div>
            <div class="key"><a href="#">0</a></div>
            <div class="key delete"><a href="#">&lbarr;</a></div>
        </div>
    </div>
    <script>

        // our url for getting all the available images and collections:
        let url_all_data = "http://peepp-0000.local:3000/AvailableImageCodes";

        // this is where we go get all the data available:
        let all_data = fetch(url_all_data, {
            method: 'GET', // *GET, POST, PUT, DELETE, etc.
            mode: 'no-cors', // no-cors, *cors, same-origin
            cache: 'no-cache', // *default, no-cache, reload, force-cache, only-if-cached
            credentials: 'same-origin', // include, *same-origin, omit
            headers: {
                // 'Content-Type': 'application/json'
                'Content-Type': 'application/x-www-form-urlencoded',
            },
            redirect: 'follow', // manual, *follow, error
            referrerPolicy: 'no-referrer', // no-referrer, *no-referrer-when-downgrade, origin, origin-when-cross-origin, same-origin, strict-origin, strict-origin-when-cross-origin, unsafe-url
            // body: JSON.stringify(data) // body data type must match "Content-Type" header
        })
            .then(response => console.log("response: " + response))
            .catch(error => console.log("Error: " + error))

        console.log("all_data: " + all_data)

        // this is our code:
        let button = document.getElementById("button_go");
        let number_input = document.getElementById("number_input");
        let collection = "MHI Collection PART";
        button.addEventListener("click", function (e) {
            console.log('click!');
            // console.log(number_input.value);
            let url = "http://peepp-0000.local:3000/ShowImage?image_code=";
            url = url + '' + collection + '/' + number_input.value;
            console.log(url);

            fetch(url, {
                method: 'GET', // *GET, POST, PUT, DELETE, etc.
                mode: 'no-cors', // no-cors, *cors, same-origin
                cache: 'no-cache', // *default, no-cache, reload, force-cache, only-if-cached
                credentials: 'same-origin', // include, *same-origin, omit
                headers: {
                    // 'Content-Type': 'application/json'
                    'Content-Type': 'application/x-www-form-urlencoded',
                },
                redirect: 'follow', // manual, *follow, error
                referrerPolicy: 'no-referrer', // no-referrer, *no-referrer-when-downgrade, origin, origin-when-cross-origin, same-origin, strict-origin, strict-origin-when-cross-origin, unsafe-url
                // body: JSON.stringify(data) // body data type must match "Content-Type" header
            })
                .then(response => console.log("response: " + response))
                .catch(error => console.log("Error: " + error))

        }, false);


    </script>

</body>